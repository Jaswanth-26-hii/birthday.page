<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Surprise</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #ffe4f2;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        overflow: hidden;
    }
    #inputSection {
        text-align: center;
    }
    input {
        padding: 10px;
        font-size: 1.2em;
        border: 2px solid #ff69b4;
        border-radius: 10px;
        outline: none;
        text-align: center;
    }
    button {
        padding: 10px 20px;
        margin-top: 10px;
        font-size: 1.2em;
        background: #ff69b4;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }
    #surpriseSection {
        display: none;
        position: relative;
        text-align: center;
        color: white;
    }
    #greeting {
        font-size: 2.5em;
        font-weight: bold;
        margin-top: 20px;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
    }
</style>
</head>
<body>

<div id="inputSection">
    <h2>üéÅ Open Surprise üéÅ</h2>
    <input type="text" id="nameInput" placeholder="Enter your name">
    <br>
    <button onclick="startSurprise()">Continue</button>
</div>

<div id="surpriseSection">
    <canvas id="confetti-canvas"></canvas>
    <div id="greeting"></div>
    <audio id="music" src="happy-birthday.mp3"></audio>
</div>

<script>
const card = document.body; // using body for sizing
const canvas = document.getElementById('confetti-canvas');
const ctx = canvas.getContext('2d');
let W, H, particles=[];

function resize(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

function randomColor(){
    const colors = ['#ff0', '#0f0', '#00f', '#f0f', '#0ff', '#f00'];
    return colors[Math.floor(Math.random()*colors.length)];
}

function createParticles(){
    for(let i=0;i<150;i++){
        particles.push({
            x: Math.random()*W,
            y: Math.random()*H - H,
            r: Math.random()*4+1,
            d: Math.random()*W/100,
            color: randomColor(),
            tilt: Math.floor(Math.random()*5) - 5
        });
    }
}

function draw(){
    ctx.clearRect(0,0,W,H);
    for(let i=0;i<particles.length;i++){
        let p=particles[i];
        ctx.beginPath();
        ctx.lineWidth = p.r;
        ctx.strokeStyle = p.color;
        ctx.moveTo(p.x + p.tilt + p.r, p.y);
        ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r);
        ctx.stroke();
    }
    update();
}

function update(){
    for(let i=0;i<particles.length;i++){
        let p=particles[i];
        p.y += Math.cos(p.d) + 1 + p.r/2;
        p.x += Math.sin(p.d);
        if(p.y > H){
            particles[i] = {x: Math.random()*W, y: -10, r: p.r, d: p.d, color: p.color, tilt: p.tilt};
        }
    }
}

function startConfetti(){
    createParticles();
    setInterval(draw, 20);
}

function startSurprise(){
    let name = document.getElementById("nameInput").value.trim();
    if (!name) {
        alert("Please enter a name!");
        return;
    }
    
    document.body.style.background = "url('hearts.gif') no-repeat center center/cover";
    document.getElementById("inputSection").style.display = "none";
    document.getElementById("surpriseSection").style.display = "block";
    document.getElementById("greeting").innerText = `Happy Birthday, ${name}! üéâ‚ù§Ô∏è`;
    
    document.getElementById("music").play();
    startConfetti();
}

// Allow pressing Enter to start
document.getElementById("nameInput").addEventListener("keypress", function(e){
    if (e.key === "Enter") {
        startSurprise();
    }
});
</script>

</body>
</html>
