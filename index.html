<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday ‚Äî Surprise!</title>
  <style>
    :root{--bg:#0f1724;--accent:#ff5eaa;--card:#0b1220;--glass:rgba(255,255,255,0.06)}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{background:linear-gradient(180deg,#071124 0%, #081025 50%, #071B2A 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:9999;}
    .overlay-box{background:var(--card);padding:24px;border-radius:16px;box-shadow:0 8px 20px rgba(0,0,0,0.5);text-align:center;}
    .overlay-box h2{margin-bottom:12px}
    .overlay-box input{padding:10px;border-radius:8px;border:none;width:200px;font-size:16px;margin-bottom:12px;text-align:center;}
    .overlay-box button{padding:10px 16px;border:none;background:var(--accent);color:#fff;font-weight:bold;border-radius:8px;cursor:pointer;}
    .card{width:100%;max-width:980px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:18px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);position:relative;overflow:hidden}
    header{display:flex;gap:16px;align-items:center}
    .avatar{width:96px;height:96px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#ffd56b);flex-shrink:0;display:grid;place-items:center;font-weight:700;color:#071124;font-size:28px}
    h1{margin:0;font-size:28px}
    .sub{color:#a7b7cf;margin-top:6px}
    .hero{display:flex;gap:20px;align-items:center;margin-top:18px}
    .left{flex:1}
    .right{width:320px}
    .surprise-btn{display:inline-block;padding:14px 18px;border-radius:12px;background:linear-gradient(90deg,var(--accent),#ff9fb8);border:none;color:#071124;font-weight:700;cursor:pointer;font-size:16px;box-shadow:0 6px 18px rgba(255,94,170,0.18)}
    .small{font-size:14px;color:#c6d7ee}
    .message{margin-top:12px;padding:16px;border-radius:12px;background:var(--glass);}
    .typed{font-weight:700;font-size:22px;color:#fff}
    #confetti-canvas{position:absolute;inset:0;pointer-events:none}
    .balloon{position:absolute;border-radius:50%;width:36px;height:48px;opacity:0.85;filter:drop-shadow(0 6px 10px rgba(2,6,23,0.6))}
    @media (max-width:820px){.hero{flex-direction:column}.right{width:100%}}
  </style>
</head>
<body>

<div class="overlay" id="nameOverlay">
  <div class="overlay-box">
    <h2>üéâ What's your name?</h2>
    <input type="text" id="nameInput" placeholder="Enter your name">
    <br>
    <button onclick="startPage()">Continue</button>
  </div>
</div>

<div class="card" id="card" style="display:none;">
  <canvas id="confetti-canvas"></canvas>
  <div class="balloon" id="b1" style="background:linear-gradient(180deg,#ff9fb8,#ff5eaa);left:10%;top:10%"></div>
  <div class="balloon" id="b2" style="background:linear-gradient(180deg,#ffd56b,#ff9fb8);left:80%;top:18%"></div>

  <header>
    <div class="avatar" id="avatar">üéâ</div>
    <div>
      <h1 id="title">Happy Birthday, <span id="name"></span>!</h1>
      <div class="sub">Click the button below for your surprise üéÅ</div>
    </div>
  </header>

  <div class="hero">
    <div class="left">
      <div class="message">
        <div class="typed" id="typed">Press "Open Surprise" to reveal something special‚Ä¶</div>
      </div>
      <button class="surprise-btn" id="openBtn">Open Surprise</button>
    </div>
  </div>
</div>

<audio id="bgMusic" loop src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_e9465e02c1.mp3?filename=happy-ukulele-10169.mp3"></audio>

<script>
  let FRIEND_NAME = '';
  const SURPRISE_MESSAGE = [
    "Wishing you a day filled with love and laughter.",
    "May your year be as bright as your smile.",
    "Can't wait to celebrate with you ‚Äî happy birthday! üéÇ"
  ];

  function startPage(){
    const name = document.getElementById('nameInput').value.trim();
    if(!name) return alert('Please enter your name');
    FRIEND_NAME = name;
    document.getElementById('name').textContent = FRIEND_NAME;
    document.getElementById('avatar').textContent = FRIEND_NAME.charAt(0).toUpperCase();
    document.getElementById('nameOverlay').style.display = 'none';
    document.getElementById('card').style.display = 'block';
  }

  const typedEl = document.getElementById('typed');
  function typeLines(lines, el, speed=40){
    let i=0, li=0;
    return new Promise(resolve=>{
      function step(){
        if(li>=lines.length){ setTimeout(resolve, 600); return }
        const line = lines[li];
        if(i<=line.length){
          el.textContent = line.slice(0,i);
          i++; setTimeout(step, speed);
        } else {
          i=0; li++; setTimeout(step, 700);
        }
      }
      step();
    })
  }

  const canvas = document.getElementById('confetti-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, particles=[];
  function resize(){W=canvas.width=card.clientWidth;H=canvas.height=card.clientHeight}
  const card = document.getElementById('card');
  window.addEventListener('resize', resize);
  resize();

  function spawnConfetti(amount=120){
    particles = [];
    for(let i=0;i<amount;i++){
      particles.push({x:Math.random()*W,y:-10,vy:2+Math.random()*5, vx:(Math.random()-0.5)*6, r:6+Math.random()*8, color:`hsl(${Math.random()*360}deg 70% 65%)`, rot:Math.random()*360, vrot:(Math.random()-0.5)*10})
    }
    animate();
  }
  let animId=null;
  function animate(){
    ctx.clearRect(0,0,W,H);
    for(let p of particles){
      p.x += p.vx; p.y += p.vy; p.vy *= 1.01; p.rot += p.vrot;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
      ctx.fillStyle = p.color; ctx.fillRect(-p.r/2,-p.r/2,p.r,p.r*0.65);
      ctx.restore();
    }
    particles = particles.filter(p=>p.y < H+40);
    if(particles.length>0) animId=requestAnimationFrame(animate); else {ctx.clearRect(0,0,W,H); cancelAnimationFrame(animId);}
  }

  const openBtn = document.getElementById('openBtn');
  const bgMusic = document.getElementById('bgMusic');

  openBtn.addEventListener('click', async ()=>{
    await typeLines(SURPRISE_MESSAGE, typedEl, 45);
    spawnConfetti(160);
    bgMusic.play().catch(()=>{});
  });

  const ro = new ResizeObserver(()=>{resize()}); ro.observe(card);
</script>

</body>
</html>
